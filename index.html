<html>

<head>
    <title>You Know You Want Croissant</title>
    <meta name="robots" content="noindex">
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <style>
        body {
            font-family: 'Lucida Grand', Helvetica, Arial, sans-serif;
        }
    </style>
    <script type="text/javascript">
        var host = location.origin.replace(/^http/, 'ws');
        var socket = io(host);

        socket.on('speak', function (text) {
            var url = "http://translate.google.com/translate_tts?ie=UTF-8&tl=en-us&q="+encodeURIComponent(text);
            var audio = new Audio(url);
            audio.controls = true;
            var chargeLi = $('<li class="any-player"></li>');
            chargeLi.html(audio.outerHTML);
            $('#sayings').prepend(chargeLi);
            $(".any-player audio")[0].play();
            chargeLi = $('<li class="play-anything"></li>');
            $(chargeLi).text("Spoke: "+text);
            $('#charges').prepend(chargeLi);
        });

        socket.on('speakFrench', function (text) {
            var url = "http://translate.google.com/translate_tts?ie=UTF-8&tl=fr&q="+encodeURIComponent(text);
            var audio = new Audio(url);
            audio.controls = true;
            var chargeLi = $('<li class="any-player"></li>');
            chargeLi.html(audio.outerHTML);
            $('#sayings').prepend(chargeLi);
            $(".any-player audio")[0].play();
            chargeLi = $('<li class="play-anything"></li>');
            $(chargeLi).text("Spoke: "+text);
            $('#charges').prepend(chargeLi);
        });        

    </script>
</head>

<body>
    <center>
        <br>
        <br>
        <br>
        <form method="get" action="/speak">
            <h1>
            Speak: 
            <input type="text" name="text" placeholder="Hello World">
            <input type="submit" value="Say">
            </h1>
        </form>

        <form method="get" action="/speak_french">
            <h1>
            Speak French:  
            <input type="text" name="text" placeholder="Hello World">
            <input type="submit" value="Say">
            </h1>
        </form>        
        <br>
        <a href="/refresh">Refresh All Receivers</a><br><br>
        <a href="/volume?text=0.5">Volume</a>

    </center>
    <br>
    <ul id="sayings"></ul>
</body>

</html>
